<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>$SKR Airdrop Claim Progress</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #ffffff;
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            overflow-x: hidden;
        }
        header {
            text-align: center;
            padding: 40px 20px;
            background: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            margin: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
            backdrop-filter: blur(10px);
        }
        h1 {
            font-size: 3em;
            margin: 0;
            text-shadow: 0 0 10px #ffffff;
        }
        .progress-container {
            width: 80%;
            max-width: 800px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50px;
            overflow: hidden;
            margin: 20px auto;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.5);
        }
        .progress-bar {
            height: 30px;
            background: linear-gradient(to right, #ff7e5f, #feb47b);
            width: 0;
            transition: width 0.5s ease-in-out;
            border-radius: 50px;
        }
        #progress-text {
            text-align: center;
            font-size: 1.5em;
            margin: 10px 0;
        }
        .tx-section {
            width: 90%;
            max-width: 1200px;
            margin: 20px auto;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 8px 32px rgba(31, 38, 135, 0.37);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        th, td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }
        th {
            background: rgba(0, 0, 0, 0.3);
        }
        a {
            color: #feb47b;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        footer {
            text-align: center;
            padding: 20px;
            font-size: 0.8em;
            color: #cccccc;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
    </style>
    <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.min.js"></script>
</head>
<body>
    <header>
        <h1>$SKR Airdrop Claim Progress</h1>
        <p>Real-time tracking of $SKR token claims on Solana Mainnet</p>
    </header>

    <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
    </div>
    <p id="progress-text">Loading progress...</p>

    <div class="tx-section fade-in">
        <h2>Live Recent Transactions</h2>
        <table id="tx-table">
            <thead>
                <tr>
                    <th>Timestamp</th>
                    <th>Signature (Link)</th>
                    <th>Pool</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody></tbody>
        </table>
    </div>

    <footer>
        Created by <a href="https://x.com/ega_2ez4crypto" target="_blank">@ega_2ez4crypto</a>
    </footer>

    <script>
        const solana = new SolanaWeb3.Connection('https://api.mainnet-beta.solana.com', 'confirmed');
        const tokenMint = new SolanaWeb3.PublicKey('SKRbvo6Gf7GondiT3BbTfuRDPqLWei4j2Qy2NPGZhW3');
        const pools = [
            '7MMQtChjiwojUAhhZjeRrnnbn2VKfifKsUcAhfAjgUWZ',
            'CYPdPHMh1mD6ioFFVva7L2rFeKLBpcefVv5yv1p6iRqB',
            '97KS7T6e5KV9iVEGkxkKPNU6CbF7Eeei7dQ498xtSQx3',
            '82NacLStPnYswsaBnAA1Cf6ASqXY674mjLdRv7qd7CAX'
        ].map(addr => new SolanaWeb3.PublicKey(addr));

        const totalAirdrop = 1960785000; // Total initial airdrop allocation from sources

        async function getTokenBalance(account) {
            try {
                const balance = await solana.getTokenAccountBalance(account);
                return balance.value.uiAmount;
            } catch (e) {
                console.error('Error fetching balance:', e);
                return 0;
            }
        }

        async function updateProgress() {
            let totalBalance = 0;
            for (const pool of pools) {
                const balance = await getTokenBalance(pool);
                totalBalance += balance;
            }
            const claimed = totalAirdrop - totalBalance;
            const progress = (claimed / totalAirdrop) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-text').textContent = `${claimed.toLocaleString()} $SKR claimed (${progress.toFixed(2)}%)`;
        }

        async function getRecentTransactions() {
            let allTx = [];
            for (const pool of pools) {
                try {
                    const signatures = await solana.getSignaturesForAddress(pool, { limit: 10 });
                    signatures.forEach(sig => {
                        sig.pool = pool.toBase58();
                        allTx.push(sig);
                    });
                } catch (e) {
                    console.error('Error fetching tx for pool:', pool, e);
                }
            }
            allTx.sort((a, b) => (b.blockTime || 0) - (a.blockTime || 0));
            const uniqueTx = allTx.slice(0, 20); // Top 20 recent

            const tbody = document.querySelector('#tx-table tbody');
            tbody.innerHTML = '';
            uniqueTx.forEach(tx => {
                const row = document.createElement('tr');
                const time = tx.blockTime ? new Date(tx.blockTime * 1000).toLocaleString() : 'N/A';
                const sigLink = `<a href="https://solscan.io/tx/${tx.signature}" target="_blank">${tx.signature.slice(0, 10)}...</a>`;
                const status = tx.err ? 'Failed' : 'Success';
                row.innerHTML = `<td>${time}</td><td>${sigLink}</td><td>${tx.pool.slice(0, 10)}...</td><td>${status}</td>`;
                tbody.appendChild(row);
            });
        }

        async function updateData() {
            await updateProgress();
            await getRecentTransactions();
        }

        updateData();
        setInterval(updateData, 30000); // Update every 30 seconds
    </script>
</body>
</html>
